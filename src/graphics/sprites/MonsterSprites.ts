/**
 * MonsterSprites — Pixel art for 6 monster types.
 * Each monster has a 20×20 grid + color palette.
 * Monsters are selected based on level range.
 */

import type { PixelGrid, ColorPalette } from '../PixelRenderer';

export interface MonsterSpriteData {
    name: string;
    art: PixelGrid;
    colors: ColorPalette;
    levelRange: [number, number]; // [min, max]
}

// ── 1. Slime (Lv 1-5) ──
const SLIME: MonsterSpriteData = {
    name: 'slime',
    levelRange: [1, 5],
    colors: [
        0x000000, 0x006600, 0x44ff44, 0xffffff, 0x000000,
        0x00aa00, 0x88ff88, 0xffff00, 0x99ff99, 0xff9999,
        0x77aa77, 0xaa7777
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0, 0],
        [0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0],
        [0, 0, 1, 2, 2, 2, 6, 6, 2, 2, 2, 2, 6, 6, 2, 2, 2, 1, 0, 0],
        [0, 0, 1, 2, 2, 2, 6, 6, 2, 2, 2, 2, 6, 6, 2, 2, 2, 1, 0, 0],
        [0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0],
        [0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0],
        [1, 2, 2, 2, 2, 3, 3, 3, 4, 2, 2, 3, 3, 3, 4, 2, 2, 2, 2, 1],
        [1, 2, 2, 2, 2, 3, 3, 3, 2, 7, 7, 2, 3, 3, 2, 2, 2, 2, 2, 1],
        [1, 2, 2, 2, 2, 2, 3, 2, 7, 7, 7, 7, 2, 2, 2, 2, 2, 2, 2, 1],
        [1, 2, 2, 2, 6, 6, 2, 7, 7, 7, 7, 7, 7, 2, 6, 6, 2, 2, 2, 1],
        [1, 2, 2, 2, 8, 6, 2, 2, 7, 7, 7, 7, 2, 2, 8, 6, 2, 2, 2, 1],
        [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
        [1, 5, 5, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5, 5, 1],
        [1, 5, 5, 5, 2, 2, 2, 10, 10, 2, 2, 10, 10, 2, 2, 2, 5, 5, 5, 1],
        [0, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 1, 0],
        [0, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 1, 0],
        [0, 0, 1, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 1, 1, 0, 0],
        [0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0],
    ],
};

// ── 2. Bat (Lv 3-10) ──
const BAT: MonsterSpriteData = {
    name: 'bat',
    levelRange: [3, 10],
    colors: [
        0x000000, 0x332244, 0x553366, 0x774488, 0x9966aa,
        0xff0000, 0xff4444, 0xffcccc, 0xffffff, 0x221133,
        0x442255, 0xcc88ee
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0],
        [1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 1, 0],
        [1, 2, 3, 2, 1, 0, 0, 0, 2, 2, 2, 2, 0, 0, 1, 2, 3, 2, 1, 0],
        [1, 3, 3, 3, 2, 1, 0, 2, 3, 3, 3, 3, 2, 1, 2, 3, 3, 3, 1, 0],
        [1, 3, 4, 3, 3, 2, 2, 3, 3, 3, 3, 3, 3, 2, 3, 3, 4, 3, 1, 0],
        [0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0],
        [0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0],
        [0, 0, 0, 1, 2, 2, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 0, 0, 0, 0],
        [0, 0, 0, 0, 1, 2, 3, 5, 8, 3, 3, 5, 8, 3, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 3, 6, 6, 6, 3, 3, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
};

// ── 3. Skeleton (Lv 6-15) ──
const SKELETON: MonsterSpriteData = {
    name: 'skeleton',
    levelRange: [6, 15],
    colors: [
        0x000000, 0x444444, 0xcccccc, 0xeeeeee, 0xffffff,
        0x999999, 0x666666, 0xff4444, 0xaaaaaa, 0x333333,
        0x777777, 0xbb0000
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 3, 3, 3, 3, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 3, 3, 3, 3, 3, 3, 2, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 1, 4, 3, 3, 1, 4, 3, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 3, 1, 1, 1, 1, 3, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 5, 2, 2, 2, 2, 5, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 1, 5, 2, 5, 3, 3, 3, 3, 5, 2, 5, 1, 0, 0, 0, 0],
        [0, 0, 0, 1, 5, 2, 1, 5, 2, 2, 2, 2, 5, 1, 2, 5, 1, 0, 0, 0],
        [0, 0, 0, 0, 1, 1, 0, 1, 5, 5, 5, 5, 1, 0, 1, 1, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 5, 5, 5, 5, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 5, 0, 5, 5, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
};

// ── 4. Goblin (Lv 8-20) ──
const GOBLIN: MonsterSpriteData = {
    name: 'goblin',
    levelRange: [8, 20],
    colors: [
        0x000000, 0x334422, 0x557744, 0x88aa66, 0xaabb88,
        0xff8844, 0xffaa66, 0xffffff, 0x222211, 0x996633,
        0x664422, 0xcc6600
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 3, 3, 3, 3, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 1, 1, 2, 3, 3, 3, 3, 3, 3, 2, 1, 1, 0, 0, 0, 0],
        [0, 0, 0, 1, 3, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 3, 1, 0, 0, 0],
        [0, 0, 0, 0, 1, 1, 3, 7, 8, 3, 3, 7, 8, 3, 1, 1, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 3, 3, 5, 5, 5, 5, 3, 3, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 3, 3, 3, 3, 3, 3, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 9, 9, 9, 9, 9, 9, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 3, 8, 1, 9, 10, 9, 9, 10, 9, 1, 8, 3, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 3, 1, 9, 9, 9, 9, 9, 9, 1, 3, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 9, 9, 9, 9, 9, 9, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 10, 10, 10, 10, 10, 10, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 9, 9, 1, 9, 9, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 9, 9, 1, 9, 9, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 10, 10, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
};

// ── 5. Dark Knight (Lv 15-30) ──
const DARK_KNIGHT: MonsterSpriteData = {
    name: 'dark_knight',
    levelRange: [15, 30],
    colors: [
        0x000000, 0x222222, 0x444444, 0x666666, 0x888888,
        0xaa0000, 0xff0000, 0xff4444, 0xffffff, 0x111111,
        0x333333, 0xff8800
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 5, 1, 1, 1, 1, 5, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 5, 1, 2, 2, 2, 2, 1, 5, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 5, 1, 2, 2, 5, 5, 2, 2, 1, 5, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 6, 8, 2, 2, 6, 8, 2, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 5, 5, 5, 5, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 5, 9, 1, 2, 2, 2, 2, 2, 2, 1, 9, 5, 11, 0, 0, 0],
        [0, 0, 0, 5, 1, 10, 1, 2, 3, 2, 2, 3, 2, 1, 10, 1, 5, 11, 0, 0],
        [0, 0, 0, 0, 1, 1, 1, 2, 2, 5, 5, 2, 2, 1, 1, 1, 0, 11, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0, 6, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 10, 10, 10, 10, 10, 10, 1, 0, 0, 0, 6, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 1, 2, 2, 1, 2, 2, 1, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 2, 2, 1, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 2, 2, 0, 0, 2, 2, 2, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 9, 9, 0, 0, 9, 9, 9, 1, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 9, 9, 9, 0, 0, 9, 9, 9, 0, 0, 0, 0, 0, 0, 0],
    ],
};

// ── 6. Dragon (Lv 25+) ──
const DRAGON: MonsterSpriteData = {
    name: 'dragon',
    levelRange: [25, 999],
    colors: [
        0x000000, 0x880000, 0xcc2200, 0xff4400, 0xff6600,
        0xff8800, 0xffaa00, 0xffcc00, 0xffffff, 0x440000,
        0x662200, 0xffee00
    ],
    art: [
        [0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 3, 2, 2, 3, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0],
        [0, 0, 0, 3, 2, 2, 6, 8, 2, 2, 2, 2, 6, 8, 2, 2, 3, 0, 0, 0],
        [0, 0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0],
        [0, 0, 3, 2, 2, 2, 2, 2, 7, 7, 7, 7, 2, 2, 2, 2, 2, 3, 0, 0],
        [0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0],
        [0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0],
        [3, 2, 2, 2, 10, 10, 2, 2, 4, 4, 4, 4, 2, 2, 10, 10, 2, 2, 2, 3],
        [3, 2, 2, 10, 2, 2, 10, 2, 5, 5, 5, 5, 2, 10, 2, 2, 10, 2, 2, 3],
        [0, 3, 2, 2, 2, 2, 2, 2, 4, 4, 4, 4, 2, 2, 2, 2, 2, 2, 3, 0],
        [0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0],
        [0, 0, 0, 3, 2, 2, 2, 2, 5, 5, 5, 5, 2, 2, 2, 2, 3, 0, 0, 0],
        [0, 0, 0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 3, 2, 2, 2, 3, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 3, 10, 2, 2, 2, 3, 2, 2, 2, 10, 3, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 3, 10, 10, 2, 0, 0, 2, 10, 10, 3, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 3, 9, 9, 0, 0, 9, 9, 3, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 9, 9, 0, 0, 9, 9, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
};

export const MONSTER_SPRITES: MonsterSpriteData[] = [
    SLIME, BAT, SKELETON, GOBLIN, DARK_KNIGHT, DRAGON
];

/** Pick the best monster for a given level. */
export function getMonsterForLevel(level: number): MonsterSpriteData {
    const candidates = MONSTER_SPRITES.filter(m => level >= m.levelRange[0] && level <= m.levelRange[1]);
    if (candidates.length === 0) return MONSTER_SPRITES[MONSTER_SPRITES.length - 1];
    return candidates[Math.floor(Math.random() * candidates.length)];
}
